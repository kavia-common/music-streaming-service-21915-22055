{"is_source_file": true, "format": "Python", "description": "This Python source file defines FastAPI dependencies related to database sessions, user authentication, and authorization, including functions for obtaining the current user and admin status, utilizing JWT tokens and database models.", "external_files": ["src.core.security", "src.db.session", "src.db.models", "src.db.crud"], "external_methods": ["decode_token", "get_user_by_email", "_get_db"], "published": ["get_db", "get_current_user", "get_current_admin"], "classes": [{"name": "User", "description": "User model class loaded from src.db.models, representing user data."}], "methods": [{"name": "Generator get_db()", "description": "Provides a generator that yields database session instances for request lifecycle.", "scope": "", "scopeKind": ""}, {"name": "User get_current_user( credentials: Optional[HTTPAuthorizationCredentials] = Depends(security_scheme), db: Session = Depends(get_db), )", "description": "Retrieves and validates the current user based on JWT token, raising HTTP exceptions on failure.", "scope": "", "scopeKind": ""}, {"name": "User get_current_admin(current_user: User = Depends(get_current_user))", "description": "Checks that the current user has admin privileges, raising exception if not.", "scope": "", "scopeKind": ""}], "calls": ["decode_token", "get_user_by_email", "db.get"], "search-terms": ["FastAPI dependencies", "JWT Bearer token authentication", "get_current_user", "get_current_admin", "database session dependency"], "state": 2, "file_id": 17, "knowledge_revision": 41, "git_revision": "", "ctags": [{"_type": "tag", "name": "_get_db", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/deps.py", "pattern": "/^from src.db.session import get_db as _get_db$/", "language": "Python", "kind": "unknown", "nameref": "unknown:get_db"}, {"_type": "tag", "name": "get_current_admin", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/deps.py", "pattern": "/^def get_current_admin(current_user: User = Depends(get_current_user)) -> User:$/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "(current_user: User = Depends(get_current_user))"}, {"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/deps.py", "pattern": "/^def get_current_user($/", "language": "Python", "typeref": "typename:User", "kind": "function", "signature": "( credentials: Optional[HTTPAuthorizationCredentials] = Depends(security_scheme), db: Session = Depends(get_db), )"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/deps.py", "pattern": "/^def get_db() -> Generator:$/", "language": "Python", "typeref": "typename:Generator", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "security_scheme", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/deps.py", "pattern": "/^security_scheme = HTTPBearer(auto_error=False)$/", "language": "Python", "kind": "variable"}], "hash": "7f3c6896ca572d253077d472a65e884f", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/api/deps.py", "fields": [{"name": "security_scheme = HTTPBearer(auto_error=False)", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"41": ""}]}