{"is_source_file": true, "format": "Python", "description": "This source file defines API routes for managing user playlists and tracks within playlists in a music streaming service. It includes CRUD operations for playlists, adding/removing tracks, and retrieving playlist details, integrated with dependency injection for database and user context.", "external_files": ["src.api.deps", "src.db.crud", "src.db.models", "src.schemas.playlists"], "external_methods": ["get_db", "get_current_user", "list_user_playlists", "create_playlist", "get_playlist", "list_playlist_tracks", "add_track_to_playlist", "remove_track_from_playlist", "update_playlist"], "published": ["router"], "classes": [{"name": "PlaylistOut", "description": "Schema for playlist output, including list of tracks"}, {"name": "PlaylistCreate", "description": "Schema for creating a playlist"}, {"name": "PlaylistUpdate", "description": "Schema for updating a playlist"}, {"name": "PlaylistTrackItem", "description": "Schema for track item within a playlist"}], "methods": [{"name": "List[PlaylistOut] list_playlists( db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )", "description": "Lists all playlists of the current user, without tracks", "scope": "", "scopeKind": ""}, {"name": "PlaylistOut create_playlist( payload: PlaylistCreate, db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )", "description": "Creates a new playlist owned by the current user", "scope": "", "scopeKind": ""}, {"name": "PlaylistOut get_playlist_details( playlist_id: int = Path(..., description=\"Playlist id\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )", "description": "Fetches playlist details including tracks for a given playlist ID", "scope": "", "scopeKind": ""}, {"name": "PlaylistOut update_playlist( playlist_id: int = Path(..., description=\"Playlist id\"), updates: PlaylistUpdate = ..., db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )", "description": "Updates an existing playlist's editable fields", "scope": "", "scopeKind": ""}, {"name": "None delete_playlist_route( playlist_id: int = Path(..., description=\"Playlist id\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )", "description": "Deletes a specified playlist", "scope": "", "scopeKind": ""}, {"name": "PlaylistOut add_track( playlist_id: int = Path(..., description=\"Playlist id\"), track_id: int = Query(..., description=\"Track ID to add\"), position: Optional[int] = Query(None, ge=0, description=\"Optional position to insert; append if omitted\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )", "description": "Adds a track to a specified playlist", "scope": "", "scopeKind": ""}, {"name": "PlaylistOut remove_track( playlist_id: int = Path(..., description=\"Playlist id\"), track_id: int = Path(..., description=\"Track id to remove\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )", "description": "Removes a track from a specified playlist", "scope": "", "scopeKind": ""}, {"name": "PlaylistOut _serialize_playlist_with_tracks(playlist, tracks: Optional[List[PlaylistTrackModel]] = None)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["get_db", "get_current_user", "list_user_playlists", "crud_create_playlist", "get_playlist", "list_playlist_tracks", "add_track_to_playlist", "remove_track_from_playlist", "crud_update_playlist", "delete_playlist"], "search-terms": ["playlists", "PlaylistOut", "playlist_id", "Tracks", "add_track", "remove_track", "user playlists API", "playlists CRUD"], "state": 2, "file_id": 20, "knowledge_revision": 49, "git_revision": "b21416487b6287c5d4ec8c6db9e758c74ba287a6", "ctags": [{"_type": "tag", "name": "PlaylistTrackModel", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^from src.db.models import User as UserModel, PlaylistTrack as PlaylistTrackModel$/", "language": "Python", "kind": "unknown", "nameref": "unknown:PlaylistTrack"}, {"_type": "tag", "name": "UserModel", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^from src.db.models import User as UserModel, PlaylistTrack as PlaylistTrackModel$/", "language": "Python", "kind": "unknown", "nameref": "unknown:User"}, {"_type": "tag", "name": "_serialize_playlist_with_tracks", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def _serialize_playlist_with_tracks(playlist, tracks: Optional[List[PlaylistTrackModel]] = None)/", "language": "Python", "typeref": "typename:PlaylistOut", "kind": "function", "signature": "(playlist, tracks: Optional[List[PlaylistTrackModel]] = None)"}, {"_type": "tag", "name": "add_track", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def add_track($/", "language": "Python", "typeref": "typename:PlaylistOut", "kind": "function", "signature": "( playlist_id: int = Path(..., description=\"Playlist id\"), track_id: int = Query(..., description=\"Track ID to add\"), position: Optional[int] = Query(None, ge=0, description=\"Optional position to insert; append if omitted\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )"}, {"_type": "tag", "name": "create_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def create_playlist($/", "language": "Python", "typeref": "typename:PlaylistOut", "kind": "function", "signature": "( payload: PlaylistCreate, db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )"}, {"_type": "tag", "name": "crud_create_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^    create_playlist as crud_create_playlist,$/", "language": "Python", "kind": "unknown", "nameref": "unknown:create_playlist"}, {"_type": "tag", "name": "crud_update_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^    update_playlist as crud_update_playlist,$/", "language": "Python", "kind": "unknown", "nameref": "unknown:update_playlist"}, {"_type": "tag", "name": "delete_playlist_route", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def delete_playlist_route($/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "( playlist_id: int = Path(..., description=\"Playlist id\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )"}, {"_type": "tag", "name": "get_playlist_details", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def get_playlist_details($/", "language": "Python", "typeref": "typename:PlaylistOut", "kind": "function", "signature": "( playlist_id: int = Path(..., description=\"Playlist id\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )"}, {"_type": "tag", "name": "list_playlists", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def list_playlists($/", "language": "Python", "typeref": "typename:List[PlaylistOut]", "kind": "function", "signature": "( db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )"}, {"_type": "tag", "name": "remove_track", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def remove_track($/", "language": "Python", "typeref": "typename:PlaylistOut", "kind": "function", "signature": "( playlist_id: int = Path(..., description=\"Playlist id\"), track_id: int = Path(..., description=\"Track id to remove\"), db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^router = APIRouter(prefix=\"\\/playlists\", tags=[\"Playlists\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "update_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/api/routes/playlists.py", "pattern": "/^def update_playlist($/", "language": "Python", "typeref": "typename:PlaylistOut", "kind": "function", "signature": "( playlist_id: int = Path(..., description=\"Playlist id\"), updates: PlaylistUpdate = ..., db: Session = Depends(get_db), current_user: UserModel = Depends(get_current_user), )"}], "hash": "04ec71a9d7283bfc544e2d60bea4e52f", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/api/routes/playlists.py", "fields": [{"name": "router = APIRouter(prefix=\"\\/playlists\", tags=[\"Playlists\"])", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"49": "b21416487b6287c5d4ec8c6db9e758c74ba287a6"}]}