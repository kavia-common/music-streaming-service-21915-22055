{"is_source_file": true, "format": "Python", "description": "This file contains data access and CRUD helper functions for managing users, playlists, tracks, albums, and search functionalities in a music streaming service backend. It interacts with SQLAlchemy ORM models and implements operations like user registration, authentication, playlist management, and catalog searches.", "external_files": ["src.core.security", "src.db.models", "src.schemas.users"], "external_methods": ["hash_password", "verify_password", "create_access_token"], "published": ["get_user_by_email", "create_user", "authenticate_user", "update_user_profile", "list_user_playlists", "create_playlist", "get_playlist", "update_playlist", "delete_playlist", "list_playlist_tracks", "add_track_to_playlist", "remove_track_from_playlist", "search_catalog"], "classes": [], "methods": [{"name": "Optional[User] get_user_by_email(db: Session, email: str)", "description": "Fetches a user from the database by their email address, case-insensitive.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Optional[User],Optional[str]] create_user(db: Session, data: UserCreate)", "description": "Handles user registration, creating a new user with hashed password and returning the user object or an error message.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Optional[str],Optional[User],Optional[str]] authenticate_user(db: Session, credentials: UserLogin)", "description": "Verifies user credentials and returns an access token, user object, or an error message.", "scope": "", "scopeKind": ""}, {"name": "Optional[User] update_user_profile(db: Session, user_id: int, updates: UserUpdate)", "description": "Updates user profile fields based on provided update data.", "scope": "", "scopeKind": ""}, {"name": "List[Playlist] list_user_playlists(db: Session, owner_user_id: int)", "description": "Retrieves all playlists owned by a specific user.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Optional[Playlist],Optional[str]] create_playlist( db: Session, owner_user_id: int, name: str, description: Optional[str] = None, cover_image: Optional[str] = None, is_public: bool = False )", "description": "Creates a new playlist for a user with optional description and cover image.", "scope": "", "scopeKind": ""}, {"name": "Optional[Playlist] get_playlist(db: Session, playlist_id: int, owner_user_id: Optional[int] = None)", "description": "Fetches a playlist by ID, optionally restricting to the owner.", "scope": "", "scopeKind": ""}, {"name": "Optional[Playlist] update_playlist( db: Session, playlist_id: int, owner_user_id: int, name: Optional[str] = None, description: Optional[str] = None, cover_image: Optional[str] = None, is_public: Optional[bool] = None )", "description": "Updates playlist attributes such as name, description, cover image, and privacy setting.", "scope": "", "scopeKind": ""}, {"name": "bool delete_playlist(db: Session, playlist_id: int, owner_user_id: int)", "description": "Deletes a playlist owned by the user.", "scope": "", "scopeKind": ""}, {"name": "List[PlaylistTrack] list_playlist_tracks(db: Session, playlist_id: int)", "description": "Lists tracks within a playlist ordered by their position.", "scope": "", "scopeKind": ""}, {"name": "Tuple[Optional[PlaylistTrack],Optional[str]] add_track_to_playlist(db: Session, playlist_id: int, track_id: int, position: Optional[int] = None)", "description": "Adds a track to a playlist at a specified position, or appends if no position is provided.", "scope": "", "scopeKind": ""}, {"name": "bool remove_track_from_playlist(db: Session, playlist_id: int, track_id: int)", "description": "Removes a specified track from a playlist.", "scope": "", "scopeKind": ""}, {"name": "dict[str,list[Any]] search_catalog( db: Session, query: str, genre: Optional[str] = None, artist: Optional[str] = None, album: Optional[str] = None, limit: int = 25, offset: int = 0 )", "description": "Searches for tracks, artists, and albums by query and optional filters like genre, artist, and album.", "scope": "", "scopeKind": ""}], "calls": ["select", "update", "delete", "func.lower", "db.execute", "db.commit", "db.refresh", "db.rollback", "list", "tuple"], "search-terms": ["SQLAlchemy", "Playlist", "Track", "User", "CRUD", "search_helpers", "catalog_search", "playlist management"], "state": 2, "file_id": 10, "knowledge_revision": 37, "git_revision": "2d488028ea1350cf2bece10ffc1b8f1543b07e1b", "revision_history": [{"22": ""}, {"36": ""}, {"37": "2d488028ea1350cf2bece10ffc1b8f1543b07e1b"}], "ctags": [{"_type": "tag", "name": "add_track_to_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def add_track_to_playlist(db: Session, playlist_id: int, track_id: int, position: Optional[int] /", "language": "Python", "typeref": "typename:Tuple[Optional[PlaylistTrack],Optional[str]]", "kind": "function", "signature": "(db: Session, playlist_id: int, track_id: int, position: Optional[int] = None)"}, {"_type": "tag", "name": "authenticate_user", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def authenticate_user(db: Session, credentials: UserLogin) -> Tuple[Optional[str], Optional[User/", "language": "Python", "typeref": "typename:Tuple[Optional[str],Optional[User],Optional[str]]", "kind": "function", "signature": "(db: Session, credentials: UserLogin)"}, {"_type": "tag", "name": "create_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def create_playlist($/", "language": "Python", "typeref": "typename:Tuple[Optional[Playlist],Optional[str]]", "kind": "function", "signature": "( db: Session, owner_user_id: int, name: str, description: Optional[str] = None, cover_image: Optional[str] = None, is_public: bool = False )"}, {"_type": "tag", "name": "create_user", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def create_user(db: Session, data: UserCreate) -> Tuple[Optional[User], Optional[str]]:$/", "language": "Python", "typeref": "typename:Tuple[Optional[User],Optional[str]]", "kind": "function", "signature": "(db: Session, data: UserCreate)"}, {"_type": "tag", "name": "delete_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def delete_playlist(db: Session, playlist_id: int, owner_user_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(db: Session, playlist_id: int, owner_user_id: int)"}, {"_type": "tag", "name": "get_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def get_playlist(db: Session, playlist_id: int, owner_user_id: Optional[int] = None) -> Optional/", "language": "Python", "typeref": "typename:Optional[Playlist]", "kind": "function", "signature": "(db: Session, playlist_id: int, owner_user_id: Optional[int] = None)"}, {"_type": "tag", "name": "get_user_by_email", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def get_user_by_email(db: Session, email: str) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, email: str)"}, {"_type": "tag", "name": "list_playlist_tracks", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def list_playlist_tracks(db: Session, playlist_id: int) -> List[PlaylistTrack]:$/", "language": "Python", "typeref": "typename:List[PlaylistTrack]", "kind": "function", "signature": "(db: Session, playlist_id: int)"}, {"_type": "tag", "name": "list_user_playlists", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def list_user_playlists(db: Session, owner_user_id: int) -> List[Playlist]:$/", "language": "Python", "typeref": "typename:List[Playlist]", "kind": "function", "signature": "(db: Session, owner_user_id: int)"}, {"_type": "tag", "name": "remove_track_from_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def remove_track_from_playlist(db: Session, playlist_id: int, track_id: int) -> bool:$/", "language": "Python", "typeref": "typename:bool", "kind": "function", "signature": "(db: Session, playlist_id: int, track_id: int)"}, {"_type": "tag", "name": "search_catalog", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def search_catalog($/", "language": "Python", "typeref": "typename:dict[str,list[Any]]", "kind": "function", "signature": "( db: Session, query: str, genre: Optional[str] = None, artist: Optional[str] = None, album: Optional[str] = None, limit: int = 25, offset: int = 0 )"}, {"_type": "tag", "name": "update_playlist", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def update_playlist($/", "language": "Python", "typeref": "typename:Optional[Playlist]", "kind": "function", "signature": "( db: Session, playlist_id: int, owner_user_id: int, name: Optional[str] = None, description: Optional[str] = None, cover_image: Optional[str] = None, is_public: Optional[bool] = None )"}, {"_type": "tag", "name": "update_user_profile", "path": "/home/kavia/workspace/code-generation/music-streaming-service-21915-22055/BackendAPI/src/db/crud.py", "pattern": "/^def update_user_profile(db: Session, user_id: int, updates: UserUpdate) -> Optional[User]:$/", "language": "Python", "typeref": "typename:Optional[User]", "kind": "function", "signature": "(db: Session, user_id: int, updates: UserUpdate)"}], "hash": "46dc967b4a34992207d300e0f301f62b", "format-version": 4, "code-base-name": "BackendAPI", "filename": "BackendAPI/src/db/crud.py"}