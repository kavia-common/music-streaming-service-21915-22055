{"is_source_file": true, "format": "Python", "description": "This file defines API routes for admin functionalities in a music streaming service backend, including user management and catalog administration with audit logging. It includes route handlers for listing users and creating tracks, along with internal functions for auditing actions and creating track records.", "external_files": ["src.api.deps", "src.db.models", "src.schemas.catalog", "src.schemas.users"], "external_methods": ["get_current_admin", "get_db", "AdminAuditLog", "Track", "User", "TrackCreate", "TrackOut", "UserOut"], "published": ["router"], "classes": [{"name": "AdminAuditLog", "description": "Database model for audit logs of admin actions."}, {"name": "Track", "description": "Database model representing a music track."}, {"name": "User", "description": "Database model representing a user."}], "methods": [{"name": "_audit", "description": "Internal function to log admin actions into the audit log table, errors are swallowed."}, {"name": "list_users_admin", "description": "API endpoint to retrieve a paginated list of users, with audit logging of the action."}, {"name": "_create_track", "description": "Internal function to create a new track record in the database, returning the track or an error message."}, {"name": "create_music_admin", "description": "API endpoint to create a new music track, with audit logging of the creation action."}], "calls": ["select", "db.execute", "db.add", "db.commit", "db.refresh", "db.rollback", "AdminAuditLog", "Track", "User", "UserOut.model_validate", "TrackOut.model_validate", "get_current_admin", "get_db"], "search-terms": ["admin routes", "audit logging", "create track", "list users", "admin API", "music streaming backend"], "state": 2, "file_id": 27, "knowledge_revision": 94, "git_revision": "bd18e8f1ba36a3b3c0f5feac3d420d7c429b6505", "revision_history": [{"68": "bd18e8f1ba36a3b3c0f5feac3d420d7c429b6505"}, {"70": "bd18e8f1ba36a3b3c0f5feac3d420d7c429b6505"}, {"94": "bd18e8f1ba36a3b3c0f5feac3d420d7c429b6505"}], "ctags": [], "filename": "BackendAPI/src/api/routes/admin.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/music-streaming-service-21915-22055.git:kavia-main"}