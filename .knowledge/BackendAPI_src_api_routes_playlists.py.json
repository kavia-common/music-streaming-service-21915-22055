{"is_source_file": true, "format": "Python", "description": "This file defines API routes for managing user playlists and tracks within a music streaming service. It includes endpoints for listing, creating, retrieving, updating, deleting playlists, and adding/removing tracks from playlists. It uses FastAPI framework, SQLAlchemy ORM models, and custom CRUD operations.", "external_files": ["src.api.deps", "src.db.crud", "src.db.models", "src.schemas.playlists"], "external_methods": ["get_db", "get_current_user", "list_user_playlists", "create_playlist", "get_playlist", "list_playlist_tracks", "update_playlist", "delete_playlist", "add_track_to_playlist", "remove_track_from_playlist"], "published": ["list_playlists", "create_playlist", "get_playlist_details", "update_playlist", "delete_playlist_route", "add_track", "remove_track"], "classes": [], "methods": [{"name": "_serialize_playlist_with_tracks", "description": "Helper function to convert ORM playlist and tracks into a PlaylistOut schema including track items."}, {"name": "list_playlists", "description": "Returns all playlists for the current user without tracks."}, {"name": "create_playlist", "description": "Creates a new playlist for the current user."}, {"name": "get_playlist_details", "description": "Retrieves detailed information of a specific playlist including tracks."}, {"name": "update_playlist", "description": "Updates an existing playlist owned by the current user."}, {"name": "delete_playlist_route", "description": "Deletes a playlist owned by the current user."}, {"name": "add_track", "description": "Adds a track to a playlist owned by the current user."}, {"name": "remove_track", "description": "Removes a track from a playlist owned by the current user."}], "calls": ["get_db", "get_current_user", "list_user_playlists", "crud_create_playlist", "get_playlist", "list_playlist_tracks", "crud_update_playlist", "delete_playlist", "add_track_to_playlist", "remove_track_from_playlist"], "search-terms": ["playlists API", "user playlist management", "playlist tracks", "FastAPI playlists routes", "music streaming service API"], "state": 2, "file_id": 20, "knowledge_revision": 99, "git_revision": "b21416487b6287c5d4ec8c6db9e758c74ba287a6", "revision_history": [{"49": "b21416487b6287c5d4ec8c6db9e758c74ba287a6"}, {"99": "b21416487b6287c5d4ec8c6db9e758c74ba287a6"}], "ctags": [], "filename": "BackendAPI/src/api/routes/playlists.py", "format-version": 4, "code-base-name": "https://github.com/kavia-common/music-streaming-service-21915-22055.git:kavia-main"}